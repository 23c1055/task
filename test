#!/bin/bash
# SPDX-FileCopyrightText: 2024 Goto Shingo
# SPDX-License-Identifier: BSD-3-Clause

ng() {
    echo "${1}行目が違うよ"
    res=1
}

res=0

stderr_output=$(echo "Helloh wor1dっ!" | ./task1 2>&1 1>/dev/null)

space=$(echo "$stderr_output" | grep -o 'space:[0-9]*' | cut -d':' -f2)
others=$(echo "$stderr_output" | grep -o 'others:[0-9]*' | cut -d':' -f2)
total=$(echo "$stderr_output" | grep -o 'total:[0-9]*' | cut -d':' -f2)

[ "$space" = 1 ] || ng "$LINENO"
[ "$others" = 3 ] || ng "$LINENO"
[ "$total" = 10 ] || ng "$LINENO"

[ "$res" = 0 ] && echo OK

exit $res

