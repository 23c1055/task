#!/bin/bash
# SPDX-FileCopyrightText: 2024 Goto Shingo
# SPDX-License-Identifier: BSD-3-Clause

ng() {
    echo "${1}行目が違うよ"
    res=1
}

res=0

output=$(echo "Helloh wor1dっ!" | ./task1)

if echo "$output" | grep -q '[A-Z]'; then
	ng "$LINENO"
fi

space=$(echo "$output" | grep -o 'space:[^[:space:]]*' | sed 's/space://')
[ "$space" -eq 1 ] || ng "$LINENO"

others=$(echo "$output" | grep -o 'others:[^[:space:]]*' | sed 's/others://')
[ "$others" -eq 3 ] || ng "$LINENO"

total=$(echo "$output" | grep -o 'total:[^[:space:]]*' | sed 's/total://')
[ "$total" -eq 10 ] || ng "$LINENO"


[ "$res" = 0 ] && echo "OK"

exit $res

